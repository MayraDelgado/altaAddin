"undefined"==typeof rison&&(window.rison={}),rison.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var a=[],b=0;16>b;b++)for(var c=0;16>c;c++)if(b+c!=0){var d=String.fromCharCode(16*b+c);/\w|[-_.\/~]/.test(d)||a.push("\\u00"+b.toString(16)+c.toString(16))}rison.not_idchar=a.join("")}(),rison.not_idchar=" '!:(),*@$",rison.not_idstart="-0123456789",function(){var a="[^"+rison.not_idstart+rison.not_idchar+"][^"+rison.not_idchar+"]*";rison.id_ok=new RegExp("^"+a+"$"),rison.next_id=new RegExp(a,"g")}(),rison.quote=function(a){return/^[-A-Za-z0-9~!*()_.',:@$\/]*$/.test(a)?a:encodeURIComponent(a).replace("%2C",",","g").replace("%3A",":","g").replace("%40","@","g").replace("%24","$","g").replace("%2F","/","g").replace("%20","+","g")},function(){var a={"'":!0,"!":!0},b={array:function(a){var c,d,e,f,g=["!("],h=a.length;for(e=0;h>e;e+=1)f=a[e],d=b[typeof f],d&&(f=d(f),"string"==typeof f&&(c&&(g[g.length]=","),g[g.length]=f,c=!0));return g[g.length]=")",g.join("")},"boolean":function(a){return a?"!t":"!f"},"null":function(){return"!n"},number:function(a){return isFinite(a)?String(a).replace(/\+/,""):"!n"},object:function(a){if(a){if(a instanceof Array)return b.array(a);if("object"==typeof a.__prototype__&&"undefined"!=typeof a.__prototype__.encode_rison)return a.encode_rison();var c,d,e,f,g,h=["("],i=[];for(e in a)i[i.length]=e;for(i.sort(),g=0;g<i.length;g++)e=i[g],f=a[e],d=b[typeof f],d&&(f=d(f),"string"==typeof f&&(c&&(h[h.length]=","),h.push(b.string(e),":",f),c=!0));return h[h.length]=")",h.join("")}return"!n"},string:function(b){return""==b?"''":rison.id_ok.test(b)?b:(b=b.replace(/(['!])/g,function(b,c){return a[c]?"!"+c:c}),"'"+b+"'")},undefined:function(){throw new Error("rison can't encode the undefined value")}};rison.encode=function(a){return b[typeof a](a)},rison.encode_object=function(a){if("object"!=typeof a||null===a||a instanceof Array)throw new Error("rison.encode_object expects an object argument");var c=b[typeof a](a);return c.substring(1,c.length-1)},rison.encode_array=function(a){if(!(a instanceof Array))throw new Error("rison.encode_array expects an array argument");var c=b[typeof a](a);return c.substring(2,c.length-1)},rison.encode_uri=function(a){return rison.quote(b[typeof a](a))}}(),rison.decode=function(a){var b=function(a){throw Error("rison decoder error: "+a)},c=new rison.parser(b);return c.parse(a)},rison.decode_object=function(a){return rison.decode("("+a+")")},rison.decode_array=function(a){return rison.decode("!("+a+")")},rison.parser=function(a){this.errorHandler=a},rison.parser.WHITESPACE="",rison.parser.prototype.setOptions=function(a){a.errorHandler&&(this.errorHandler=a.errorHandler)},rison.parser.prototype.parse=function(a){this.string=a,this.index=0,this.message=null;var b=this.readValue();return!this.message&&this.next()&&(b=this.error("unable to parse string as rison: '"+rison.encode(a)+"'")),this.message&&this.errorHandler&&this.errorHandler(this.message,this.index),b},rison.parser.prototype.error=function(a){return"undefined"!=typeof console&&console.log("rison parser error: ",a),void(this.message=a)},rison.parser.prototype.readValue=function(){var a=this.next(),b=a&&this.table[a];if(b)return b.apply(this);var c=this.string,d=this.index-1;rison.next_id.lastIndex=d;var e=rison.next_id.exec(c);if(e.length>0){var f=e[0];return this.index=d+f.length,f}return this.error(a?"invalid character: '"+a+"'":"empty expression")},rison.parser.parse_array=function(a){for(var b,c=[];")"!=(b=a.next());){if(!b)return a.error("unmatched '!('");if(c.length)","!=b&&a.error("missing ','");else{if(","==b)return a.error("extra ','");--a.index}var d=a.readValue();if("undefined"==typeof d)return void 0;c.push(d)}return c},rison.parser.bangs={t:!0,f:!1,n:null,"(":rison.parser.parse_array},rison.parser.prototype.table={"!":function(){var a=this.string,b=a.charAt(this.index++);if(!b)return this.error('"!" at end of input');var c=rison.parser.bangs[b];return"function"==typeof c?c.call(null,this):"undefined"==typeof c?this.error('unknown literal: "!'+b+'"'):c},"(":function(){for(var a,b={},c=0;")"!=(a=this.next());){if(c)","!=a&&this.error("missing ','");else{if(","==a)return this.error("extra ','");--this.index}var d=this.readValue();if("undefined"==typeof d)return void 0;if(":"!=this.next())return this.error("missing ':'");var e=this.readValue();if("undefined"==typeof e)return void 0;b[d]=e,c++}return b},"'":function(){for(var a,b=this.string,c=this.index,d=c,e=[];"'"!=(a=b.charAt(c++));){if(!a)return this.error('unmatched "\'"');if("!"==a){if(c-1>d&&e.push(b.slice(d,c-1)),a=b.charAt(c++),!("!'".indexOf(a)>=0))return this.error('invalid string escape: "!'+a+'"');e.push(a),d=c}}return c-1>d&&e.push(b.slice(d,c-1)),this.index=c,1==e.length?e[0]:e.join("")},"-":function(){var a=this.string,b=this.index,c=b-1,d="int",e="-",f={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var g=a.charAt(b++);if(!g)break;g>="0"&&"9">=g||(e.indexOf(g)>=0?e="":(d=f[d+"+"+g.toLowerCase()],"exp"==d&&(e="-")))}while(d);return this.index=--b,a=a.slice(c,b),"-"==a?this.error("invalid number"):Number(a)}},function(a){for(var b=0;9>=b;b++)a[String(b)]=a["-"]}(rison.parser.prototype.table),rison.parser.prototype.next=function(){var a=this.string,b=this.index;do{if(b==a.length)return void 0;var c=a.charAt(b++)}while(rison.parser.WHITESPACE.indexOf(c)>=0);return this.index=b,c},function(){"use strict";var a=3e5,b="geotabJSONP",c=function(a){return"https://"+a+"/apiv1"},d=function(b,d,e){return new Promise(function(f,g){var h,i=new XMLHttpRequest;i.open("POST",c(b),!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.addEventListener("abort",function(a){g(Error(a))}),i.onreadystatechange=function(){var a,b,c;if(4===i.readyState){200!==i.status&&(i.responseText?h=i.responseText:(i.target||0===i.status)&&(h="Network Error: Couldn't connect to the server. Please check your network connection and try again."),g(Error(h)));try{a=JSON.parse(i.responseText),a&&a.error?(b=a.error.errors&&a.error.errors.length?a.error.errors[0]:a.error,g(b)):(c=a.result,f(c))}catch(d){g(d)}}};var j;try{j=JSON.stringify({method:d||"",params:e})}catch(k){return void g(k)}i.timeout=a,i.send("JSON-RPC="+encodeURIComponent(j))})},e=function(a){var c=document.getElementById(a);if(c){c.parentNode.removeChild(c);for(var d in c)c.hasOwnProperty(d)&&delete c[d]}delete window[b][a]},f=function(d,f,g){return new Promise(function(h,i){var j,k="json"+(100*Math.random()).toString().replace(/\./g,""),l=function(){var a=[];g=g||{};for(var b in g)g.hasOwnProperty(b)&&a.push.apply(a,["&",encodeURIComponent(b),"=",encodeURIComponent(JSON.stringify(g[b]))]);return a.join("")};window[b][k]=function(a){j&&(clearTimeout(j),j=null);try{a&&a.error?i(Error(a.error)):h(a.result)}finally{e(k)}},document.getElementsByTagName("body")[0].appendChild(function(){var a=document.createElement("script");return a.type="text/javascript",a.id=k,a.async="async",a.src=c(d)+"/"+f+"?JSONP="+b+"."+k+l(),a.onerror=function(a){try{i(Error(a))}finally{e(k)}},a}()),j&&clearTimeout(j),j=setTimeout(function(){window[b].hasOwnProperty(k)&&(window[b][k]({error:{name:"JSONPTimeout",message:"Could not complete the JSONP request in a timely manner ("+a+"s)",target:document.getElementById(k)}}),window[b][k]=function(){e(k)})},a)})},g=function(a,b,c){var e=b.map(function(a){var b=a[1];return{method:a[0],params:b}});return d(a,"ExecuteMultiCall",{calls:e,credentials:c})},h={post:d,jsonp:f,multiCall:g};return window.geotab||(window.geotab={}),window.geotab.api=h,h}(),function(){"use strict";var a={Unknown:"Unknown",Asia:"Asia",Africa:"Africa",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Antarctica:"Antarctica",Europe:"Europe",Australia:"Australia"},b={LitersPer100Km:"LitersPer100Km",KmPerLiter:"KmPerLiter",MPGUS:"MPGUS",MPGImperial:"MPGImperial"},c=function(a){switch(a){case"America/Phoenix":case"America/Los_Angeles":case"America/Indiana/Knox":case"America/Indianapolis":case"America/Menominee":case"America/New_York":case"America/Boise":case"America/Sitka":case"America/Indiana/Marengo":case"America/North_Dakota/New_Salem":case"America/St_Vincent":case"America/Chicago":case"America/Indiana/Winamac":case"America/North_Dakota/Beulah":case"America/North_Dakota/Center":case"America/Detroit":case"America/Anchorage":case"America/Indiana/Tell_City":case"America/Louisville":case"America/Indiana/Vevay":case"America/Indiana/Vincennes":case"America/Shiprock":case"America/Kentucky/Monticello":case"America/Denver":case"America/Indiana/Petersburg":case"America/Yakutat":case"America/Juneau":case"Pacific/Honolulu":case"America/Nome":return!0;default:return!1}},d=function(b){switch(b){case"Africa/Casablanca":case"Africa/Ouagadougou":case"Africa/Abidjan":case"Africa/El_Aaiun":case"Africa/Accra":case"Africa/Banjul":case"Africa/Conakry":case"Africa/Bissau":case"Africa/Monrovia":case"Africa/Bamako":case"Africa/Nouakchott":case"Africa/Freetown":case"Africa/Dakar":case"Africa/Sao_Tome":case"Africa/Lome":case"Africa/Cairo":case"Africa/Tripoli":case"Africa/Ceuta":case"Africa/Lagos":case"Africa/Luanda":case"Africa/Porto-Novo":case"Africa/Kinshasa":case"Africa/Bangui":case"Africa/Brazzaville":case"Africa/Douala":case"Africa/Algiers":case"Africa/Libreville":case"Africa/Malabo":case"Africa/Niamey":case"Africa/Ndjamena":case"Africa/Tunis":case"Africa/Windhoek":case"Africa/Johannesburg":case"Africa/Bujumbura":case"Africa/Gaborone":case"Africa/Lubumbashi":case"Africa/Maseru":case"Africa/Blantyre":case"Africa/Maputo":case"Africa/Kigali":case"Africa/Mbabane":case"Africa/Lusaka":case"Africa/Harare":case"Africa/Nairobi":case"Africa/Djibouti":case"Africa/Asmera":case"Africa/Addis_Ababa":case"Africa/Khartoum":case"Africa/Mogadishu":case"Africa/Juba":case"Africa/Dar_es_Salaam":case"Africa/Kampala":case"Indian/Comoro":case"Indian/Antananarivo":case"Indian/Mauritius":case"Indian/Mahe":case"Atlantic/Cape_Verde":case"Indian/Mayotte":case"Indian/Reunion":return a.Africa;case"Asia/Calcutta":case"Asia/Colombo":case"Asia/Katmandu":case"Asia/Almaty":case"Asia/Bishkek":case"Asia/Qyzylorda":case"Asia/Dhaka":case"Asia/Thimphu":case"Asia/Yekaterinburg":case"Asia/Rangoon":case"Asia/Bangkok":case"Asia/Jakarta":case"Asia/Pontianak":case"Asia/Phnom_Penh":case"Asia/Vientiane":case"Asia/Hovd":case"Asia/Saigon":case"Asia/Novosibirsk":case"Asia/Novokuznetsk":case"Asia/Omsk":case"Asia/Shanghai":case"Asia/Chongqing":case"Asia/Harbin":case"Asia/Kashgar":case"Asia/Urumqi":case"Asia/Hong_Kong":case"Asia/Macau":case"Asia/Krasnoyarsk":case"Asia/Singapore":case"Asia/Brunei":case"Asia/Makassar":case"Asia/Kuala_Lumpur":case"Asia/Kuching":case"Asia/Manila":case"Asia/Taipei":case"Asia/Ulaanbaatar":case"Asia/Choibalsan":case"Asia/Irkutsk":case"Asia/Tokyo":case"Asia/Jayapura":case"Asia/Dili":case"Asia/Seoul":case"Asia/Pyongyang":case"Asia/Yakutsk":case"Asia/Khandyga":case"Asia/Vladivostok":case"Asia/Sakhalin":case"Asia/Ust-Nera":case"Asia/Magadan":case"Asia/Anadyr":case"Asia/Kamchatka":case"Asia/Beirut":case"Asia/Gaza":case"Asia/Hebron":case"Asia/Damascus":case"Asia/Nicosia":case"Asia/Jerusalem":case"Asia/Amman":case"Asia/Baghdad":case"Asia/Riyadh":case"Asia/Bahrain":case"Asia/Kuwait":case"Asia/Qatar":case"Asia/Aden":case"Asia/Tehran":case"Asia/Dubai":case"Asia/Muscat":case"Asia/Baku":case"Asia/Tbilisi":case"Asia/Yerevan":case"Asia/Kabul":case"Asia/Karachi":case"Asia/Tashkent":case"Asia/Oral":case"Asia/Aqtau":case"Asia/Aqtobe":case"Asia/Dushanbe":case"Asia/Ashgabat":case"Asia/Samarkand":case"Indian/Maldives":case"Indian/Cocos":return a.Asia;case"Australia/Perth":case"Australia/Adelaide":case"Australia/Broken_Hill":case"Australia/Darwin":case"Australia/Brisbane":case"Australia/Lindeman":case"Australia/Sydney":case"Australia/Melbourne":case"Australia/Hobart":case"Australia/Currie":return a.Australia;case"Europe/London":case"Europe/Guernsey":case"Europe/Dublin":case"Europe/Isle_of_Man":case"Europe/Jersey":case"Europe/Lisbon":case"Europe/Berlin":case"Europe/Andorra":case"Europe/Vienna":case"Europe/Zurich":case"Europe/Busingen":case"Europe/Gibraltar":case"Europe/Rome":case"Europe/Vaduz":case"Europe/Luxembourg":case"Europe/Monaco":case"Europe/Malta":case"Europe/Amsterdam":case"Europe/Oslo":case"Europe/Stockholm":case"Europe/San_Marino":case"Europe/Vatican":case"Europe/Budapest":case"Europe/Tirane":case"Europe/Prague":case"Europe/Podgorica":case"Europe/Belgrade":case"Europe/Ljubljana":case"Europe/Bratislava":case"Europe/Paris":case"Europe/Brussels":case"Europe/Copenhagen":case"Europe/Madrid":case"Europe/Warsaw":case"Europe/Sarajevo":case"Europe/Zagreb":case"Europe/Skopje":case"Europe/Bucharest":case"Europe/Athens":case"Europe/Chisinau":case"Europe/Kiev":case"Europe/Mariehamn":case"Europe/Sofia":case"Europe/Tallinn":case"Europe/Helsinki":case"Europe/Vilnius":case"Europe/Riga":case"Europe/Simferopol":case"Europe/Uzhgorod":case"Europe/Zaporozhye":case"Europe/Istanbul":case"Europe/Kaliningrad":case"Europe/Minsk":case"Europe/Moscow":case"Europe/Samara":case"Europe/Volgograd":case"Atlantic/Azores":case"Atlantic/Canary":case"Atlantic/Madeira":case"Atlantic/Reykjavik":return a.Europe;case"America/Anchorage":case"America/Juneau":case"America/Nome":case"America/Sitka":case"America/Yakutat":case"America/Los_Angeles":case"America/Vancouver":case"America/Dawson":case"America/Whitehorse":case"America/Tijuana":case"America/Phoenix":case"America/Dawson_Creek":case"America/Creston":case"America/Hermosillo":case"America/Chihuahua":case"America/Mazatlan":case"America/Denver":case"America/Edmonton":case"America/Cambridge_Bay":case"America/Inuvik":case"America/Yellowknife":case"America/Ojinaga":case"America/Boise":case"America/Shiprock":case"America/Guatemala":case"America/Belize":case"America/Costa_Rica":case"America/Tegucigalpa":case"America/Managua":case"America/El_Salvador":case"America/Chicago":case"America/Winnipeg":case"America/Rainy_River":case"America/Rankin_Inlet":case"America/Menominee":case"America/North_Dakota/Beulah":case"America/North_Dakota/Center":case"America/North_Dakota/New_Salem":case"America/Mexico_City":case"America/Cancun":case"America/Merida":case"America/Monterrey":case"America/Regina":case"America/Swift_Current":case"America/Port-au-Prince":case"America/Jamaica":case"America/Panama":case"America/New_York":case"America/Nassau":case"America/Toronto":case"America/Iqaluit":case"America/Montreal":case"America/Nipigon":case"America/Pangnirtung":case"America/Thunder_Bay":case"America/Detroit":case"America/Indiana/Petersburg":case"America/Indiana/Vincennes":case"America/Indiana/Winamac":case"America/Kentucky/Monticello":case"America/Louisville":case"America/Indianapolis":case"America/Indiana/Marengo":case"America/Indiana/Vevay":case"America/Halifax":case"America/Glace_Bay":case"America/Goose_Bay":case"America/Moncton":case"America/Antigua":case"America/Barbados":case"America/Blanc-Sablon":case"America/Dominica":case"America/Santo_Domingo":case"America/Grenada":case"America/St_Kitts":case"America/St_Lucia":case"America/Port_of_Spain":case"America/St_Vincent":case"America/St_Johns":case"America/Resolute":case"America/Matamoros":case"America/Indiana/Knox":case"America/Coral_Harbour":case"America/Cayman":case"Atlantic/Bermuda":case"America/Thule":case"America/Godthab":case"America/Danmarkshavn":case"America/Indiana/Tell_City":case"Pacific/Honolulu":case"America/St_Barthelemy":case"America/Puerto_Rico":case"America/Tortola":return a.NorthAmerica;case"Pacific/Galapagos":case"America/Bogota":case"America/Guayaquil":case"America/Lima":case"America/Caracas":case"America/Asuncion":case"America/Cuiaba":case"America/Campo_Grande":case"America/La_Paz":case"America/Manaus":case"America/Boa_Vista":case"America/Eirunepe":case"America/Porto_Velho":case"America/Rio_Branco":case"America/Guyana":case"America/Santiago":case"America/Sao_Paulo":case"America/Araguaina":case"America/Buenos_Aires":case"America/Argentina/La_Rioja":case"America/Argentina/Rio_Gallegos":case"America/Argentina/Salta":case"America/Argentina/San_Juan":case"America/Argentina/San_Luis":case"America/Argentina/Tucuman":case"America/Argentina/Ushuaia":case"America/Catamarca":case"America/Cordoba":case"America/Jujuy":case"America/Mendoza":case"America/Fortaleza":case"America/Belem":case"America/Maceio":case"America/Recife":case"America/Paramaribo":case"America/Montevideo":case"America/Bahia":case"America/Noronha":case"America/Anguilla":case"America/Aruba":case"America/Kralendijk":case"America/Curacao":case"America/Guadeloupe":case"America/Marigot":case"America/Martinique":case"America/Montserrat":case"America/Cayenne":case"America/Santarem":case"Atlantic/Stanley":return a.SouthAmerica;default:return a.Unknown}},e=function(b){var c=d(b);switch(c){case a.Europe:return"dd/MM/yy HH:mm:ss";case a.Asia:return"dd/MM/yy hh:mm:ss tt";case a.NorthAmerica:case a.SouthAmerica:return"MM/dd/yy hh:mm:ss tt";case a.Australia:case a.Africa:return"dd/MM/yy hh:mm:ss tt";default:return"MM/dd/yy HH:mm:ss"}},f=function(a){if(c(a))return b.MPGUS;switch(a){case"Europe/London":case"Europe/Guernsey":case"Europe/Isle_of_Man":case"Europe/Jersey":return b.MPGImperial;case"Europe/Amsterdam":case"Europe/Copenhagen":case"Asia/Calcutta":case"Asia/Tokyo":case"Asia/Seoul":case"America/Buenos_Aires":case"America/Argentina/La_Rioja":case"America/Argentina/Rio_Gallegos":case"America/Argentina/Salta":case"America/Argentina/San_Juan":case"America/Argentina/San_Luis":case"America/Argentina/Tucuman":case"America/Argentina/Ushuaia":case"America/Catamarca":case"America/Cordoba":case"America/Jujuy":case"America/Mendoza":case"America/La_Paz":case"America/Cuiaba":case"America/Campo_Grande":case"America/Manaus":case"America/Boa_Vista":case"America/Eirunepe":case"America/Porto_Velho":case"America/Rio_Branco":case"America/Sao_Paulo":case"America/Araguaina":case"America/Fortaleza":case"America/Belem":case"America/Maceio":case"America/Recife":case"America/Bahia":case"America/Noronha":case"America/Santarem":case"America/Santiago":case"America/Bogota":case"America/Costa_Rica":case"America/Santo_Domingo":case"America/Guayaquil":case"America/El_Salvador":case"America/Cayenne":case"America/Guadeloupe":case"America/Guatemala":case"America/Port-au-Prince":case"America/Tegucigalpa":case"America/Martinique":case"America/Tijuana":case"America/Hermosillo":case"America/Chihuahua":case"America/Mazatlan":case"America/Ojinaga":case"America/Mexico_City":case"America/Cancun":case"America/Merida":case"America/Monterrey":case"America/Matamoros":case"America/Managua":case"America/Panama":case"America/Asuncion":case"America/Lima":case"America/Puerto_Rico":case"America/St_Barthelemy":case"America/Montevideo":case"America/Caracas":return b.KmPerLiter;default:return b.LitersPer100Km}},g=function(a){if(c(a))return!1;switch(a){case"America/Dominica":case"Europe/Isle_of_Man":case"America/Grenada":case"Indian/Cocos":case"Asia/Rangoon":case"Europe/Jersey":case"Europe/London":case"America/Belize":case"America/Cayman":case"America/Nassau":case"Europe/Guernsey":return!1;default:return!0}},h=function(b){var c=[],d=function(a,b,c,d,e){return{name:a,viewport:{x:b,y:c,width:d,height:e}}};switch(b){case a.Africa:c.push(new d("Africa",-53.2177734375,37.544578552246094,145.546875,-72.89779663085938));break;case a.Asia:c.push(new d("Asia",18.5888671875,56.17002487182617,145.546875,-66.31195831298828));break;case a.Australia:c.push(new d("Australia",106.3916015625,-11.523087501525879,72.7734375,-33.68991470336914));break;case a.Europe:c.push(new d("Europe",-23.994140625,60.500526428222656,72.7734375,-25.614595413208008));break;case a.NorthAmerica:c.push(new d("North America",-172.7490234375,68.08970642089844,145.546875,-52.59367752075195));break;case a.SouthAmerica:c.push(new d("South America",-129.4189453125,14.562317848205566,145.546875,-68.12873077392578));break;default:c.push(new d("World",-144.4921875,72.04683685302734,291.09375,-117.4452896118164))}return c},i={getContinentByTimeZone:d,getDateTimeFormatByTimeZone:e,getFuelEconomyUnitByTimeZone:f,getIsMetricByTimeZone:g,getMapViewsByTimeZone:h};return window.geotab||(window.geotab={}),window.geotab.local=i,i}(),document.addEventListener("DOMContentLoaded",function(){"use strict";var a,b,c,d,e={defaultHost:"my1.geotab.com",debug:!1,debugDBConfig:{host:"127.0.0.1",db:"temp",user:"qwe@qwe.qwe",password:"qweqwe"},allowedSecurityRules:[]},f=e.defaultHost,g=geotab.local,h=geotab.api.post,i=document.querySelector("#error"),j=document.querySelector("#error > span"),k=document.querySelector("#error-close"),l=document.querySelector("#loading"),m=document.querySelector("#waiting"),n=document.querySelector("#companyName"),o=document.querySelector("#registrationServer"),p=document.querySelector("#databaseNameText"),q=document.querySelector("#databaseName"),r=document.querySelector("#phoneNumber"),s=document.querySelector("#fleetSize"),t=document.querySelector("#timeZone"),u=document.querySelector("#firstName"),v=document.querySelector("#lastName"),w=document.querySelector("#email"),x=document.querySelector("#password"),y=document.querySelector("#confirmPassword"),z=document.querySelector("#updates"),A=document.querySelector("#captchaImage"),B=document.querySelector("#captchaAnswer"),C=document.querySelector("#importFile"),D=document.querySelector("#submit"),E=document.querySelectorAll("input[required]"),F={none:"",success:"has-success",warning:"has-warning",error:"has-error"},G=function(a,b){Object.keys(F).forEach(function(b){F[b]&&a.classList.remove(F[b])}),b&&a.classList.add(b)},H=function(){l.style.display="block"},I=function(){l.style.display="none"},J=function(a){var b="Error";a&&(a.name||a.message)&&(b=(a.name?a.name+": ":"")+(a.message||"")),j.textContent=b,i.style.display="block"},K=function(){i.style.display="none"},L=function(a){var b,c,d,e,f,g=95,h=new Array,i=0,j=a.split("").map(function(a){return a.charCodeAt(0)}),k=j.length;for(b=0;k>b;b++)e=j[b],f=String.fromCharCode(e),!/\w|\d/.test(f)||e===g&&h[i-1]===g?i>0&&h[i-1]!==g&&(d=i,i++,h[d]=g):(c=i,i++,h[c]=e);return String.fromCharCode.apply(this,h)},M=function(a){return p.parentNode.querySelector(".help-block").style.display="none",G(p.parentNode,F.none),a?(m.style.display="block",b&&clearTimeout(b),void(b=setTimeout(function(){h(f,"DatabaseExists",{database:a}).then(function(a){G(p.parentNode,a?F.error:F.success),p.parentNode.querySelector(".help-block").style.display=a?"block":"none",m.style.display="none"},function(){m.style.display="none",G(o.parentNode,F.error)})},600))):void(m.style.display="none")},N=function(a){var b=L(a),c="_"===b.slice(-1)?b.slice(0,-1):b;p.value=b,q.value=c,M(c)},O=function(){h(f,"GetTimeZones").then(function(a){t.innerHTML=a.sort(function(a,b){var c=a.id.toLowerCase(),d=b.id.toLowerCase();return d>c?-1:c>d?1:0}).map(function(a){return'<option value="'+a.id+'">'+a.id+"</option>"})},J)},P=function(){c=uuid.v4(),A.setAttribute("src","https://"+f+"/apiv1/GenerateCaptcha?id="+c),B.value=""},Q=function(){return{captchaAnswer:{id:c,answer:B.value},database:q.value,userName:w.value,password:x.value,companyDetails:{companyName:n.value,firstName:u.value,lastName:v.value,phoneNumber:r.value,resellerName:"ABC Fleets",fleetSize:parseInt(s.value,10)||0,comments:"",signUpForNews:z.checked}}},R=function(a){var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return b.test(a)},S=function(){d&&clearTimeout(d),d=setTimeout(function(){var a=x.value===y.value,b=y.parentNode;G(b,a?F.success:F.error),b.querySelector(".help-block").style.display=a?"none":"block"},600)},T=function(a){var b=!0;return a.companyDetails.companyName||(b=!1,G(n.parentNode,F.error)),a.database||(b=!1,G(p.parentNode,F.error)),a.userName&&R(a.userName)||(b=!1,G(w.parentNode,F.error)),a.companyDetails.firstName||(b=!1,G(u.parentNode,F.error)),a.companyDetails.lastName||(b=!1,G(v.parentNode,F.error)),a.password||(b=!1,G(x.parentNode,F.error)),a.captchaAnswer.answer||(b=!1,G(B.parentNode,F.error)),b},U=function(a){if(e.debug)return V(a);var b=function(b){var c=b.split("/");return{server:c[0],database:c[1],userName:a.userName,password:a.password}};return h(f,"CreateDatabase",a).then(b)},V=function(){var a=function(){return{server:e.debugDBConfig.host,database:e.debugDBConfig.db,userName:e.debugDBConfig.user,password:e.debugDBConfig.password}};return new Promise(function(b,c){e.debugDBConfig?b(a()):c("There is no DEBUG_CONFIG")})},W=function(a){return h(a.server,"Authenticate",{userName:a.userName,password:a.password,database:a.database}).then(function(b){return{server:a.server,credentials:b.credentials}})},X=function(a){return h(a.server,"Get",{credentials:a.credentials,typeName:"User",search:{name:a.credentials.userName}}).then(function(b){return a.user=b[0],a})},Y=function(a){var b=a.user;return e.allowedSecurityRules.length?h(a.server,"Add",{credentials:a.credentials,typeName:"Group",entity:{id:null,parent:{id:"GroupNothingSecurityId"},name:"Restricted Admin",securityFilters:e.allowedSecurityRules.map(function(a){return{isAdd:!0,securityIdentifier:a}}),color:{a:0,b:0,g:0,r:0}}}).then(function(c){return b.securityGroups=[{id:c,color:{r:0,g:0,b:0,a:255}}],a}):new Promise(function(b){return b(a)})},Z=function(a){var b=t.value,c=g.getContinentByTimeZone(b),d=a.user;return d.timeZoneId=b,d.isMetric=g.getIsMetricByTimeZone(b),d.fuelEconomyUnit=g.getFuelEconomyUnitByTimeZone(b),d.dateFormat=g.getDateTimeFormatByTimeZone(b),d.mapViews=g.getMapViewsByTimeZone(c),d.firstName=u.value,d.lastName=v.value,h(a.server,"Set",{credentials:a.credentials,typeName:"User",entity:d}).then(function(){return a})},$=function(b){return new Promise(function(c,d){var e=new FileReader,f=function(a){d(a.target.error)};return a?(e.onerror=f,e.onabort=function(){throw new Error("File read cancelled")},e.onload=function(a){var e,f=a.target.result;try{e=JSON.parse(f)}catch(a){d({message:"Invalid imported file's content. File's content can't be converted to a valid JSON object."})}b.importedConfig=e,c(b)},void e.readAsText(a)):c(b)})},_=function(a){var b=a.importedConfig;return new Promise(function(c,d){return b?void configImporter(b,a.user,a.server,a.credentials)["import"]().then(function(b){return b?(a.user=b.user,a.importedData=b.importedData,h(a.server,"Set",{credentials:a.credentials,typeName:"User",entity:a.user})):void 0}).then(function(){c(a)})["catch"](function(a){d(e.debug?a:{message:"Can't import configuration"})}):c(a)})},aa=function(a){var b=a.credentials,c=a.user,d="Welcome to MyGeotab, you can login to your database via this url: https://"+f+"/"+b.database;return h(a.server,"SendEmail",{credentials:b,email:c.name,subject:"Registration Success",body:d,bodyHtml:"<p>"+d+"<p>"}).then(function(){return a})},ba=function(a){var b=rison.encode_object({token:a.credentials});window.location="https://"+a.server+"/"+a.credentials.database+"#"+b};o.value=f,e.debug&&(n.value="qqq",p.value="qqq",q.value="qqq",r.value="qqq",s.value="qqq",o.value=e.debugDBConfig.host,u.value="qqq",v.value="qqq",w.value="qqq@qqq.com",x.value="qqq",y.value="qqq"),n.addEventListener("keyup",function(){var a=n.value.split(/\s+/),b=a.length?a[0]:"";p.value=b,q.value=b,N(b)},!1),p.addEventListener("keyup",function(){N(p.value)}),o.addEventListener("blur",function(){f=o.value,N(p.value),P()}),x.addEventListener("keyup",function(){y.value&&S()}),y.addEventListener("keyup",function(){y.value&&S()}),C.addEventListener("change",function(b){var c=b.target.files&&b.target.files[0];c&&c.name&&(!a||a.name!==c.name&&a.lastModified!==c.lastModified)&&(a=c)});for(var ca=0;ca<E.length;ca++)E[ca].addEventListener("keyup",function(a){a.target.value&&G(a.target.parentNode,F.none)});k.addEventListener("click",K),D.addEventListener("click",function(a){var b,c=function(a){I(),P(),D.removeAttribute("disabled"),J(a),"CaptchaException"===a.name&&B.focus()};return a.preventDefault(),D.setAttribute("disabled","disabled"),K(),b=Q(),T(b)?(H(),void U(b).then(W).then(X).then($).then(Y).then(Z).then(_).then(aa).then(ba)["catch"](c)):void D.removeAttribute("disabled")}),P(),O()}),function(a){var b=function(){var a,c,d,e,f,g=arguments,h=g.length,i=!1,j=g[0],k=1,l=function(a){return-1!==Object.prototype.toString.call(a).indexOf("Object")};for("boolean"==typeof j&&(i=j,j=g[1],k++);k!==h;){for(a=g[k],c=Object.keys(a),f=0;f<c.length;f++)d=a[c[f]],i&&(l(d)||Array.isArray(d))?(e=j[c[f]],e=j[c[f]]=l(e)||Array.isArray(e)?e:Array.isArray(d)?[]:{},b(i,e,d)):j[c[f]]=a[c[f]];k++}return j},c=function(){return new Promise(function(a){return a([])})},d=geotab.api.post,e=geotab.api.multiCall,f="GroupCompanyId",g="GroupPrivateUserId",h=["AssignToGroup","BeepTenTimesRapidly","BeepTenTimesRapidlyAllowDelay","BeepThreeTimes","BeepThreeTimesAllowDelay","BeepThreeTimesRapidly","BeepThreeTimesRapidlyAllowDelay","ChangeStatus","Email","LogOnly","LogPopup","LogUrgentPopup","TextMessage","TextToSpeech","TextToSpeechAllowDelay","WebRequest"];a.configImporter=function(a,i,j,k){var l=b(!0,{},i),m={},n=function(a){a.forEach(function(a){a.recipients=a.recipients.filter(function(a){return h.indexOf(a.recipientType)>-1})})},o=function(){var b=[{types:["groups"],importer:p},{types:["securityGroups"],importer:t},{types:["customMaps"],importer:s},{types:["workHolidays","workTimes","zoneTypes","users"],importer:u},{types:["diagnostics"],importer:w},{types:["zones","devices","notificationTemplates"],importer:u},{types:["rules"],importer:x},{types:["distributionLists"],importer:u,filter:n},{types:["reports"],importer:z},{types:["misc"],importer:A}];return new Promise(function(d,e){b.reduce(function(b,c){var d=c.types.map(function(b){return c.filter&&a[b]&&c.filter(a[b],b),{type:b,data:a[b]}});return b.then(function(){return c.importer(d)})},c()).then(function(){d({importedData:m,user:l})})["catch"](e)})},p=function(c){var d=c[0].data,h=function(){var a,b,c=[f],d=[],e=[f,g];do a=i(e),b=a.map(function(a){return a.id}),d.push(a),c=c.concat(b),e=b;while(e.length>0);return d},i=function(a){return d.reduce(function(b,c){return c.parent&&a.indexOf(c.parent.id)>-1&&b.push(c),b},[])},n=function(b){var c,d=a.misc.currentUser,e=a.users,f=function(a,b){return a.privateUserGroups.some(function(a){return a.id===b?!0:void 0})};return f(d,b)?c=l:e.some(function(a){return f(a,b)?(c=a,!0):void 0}),c},o=function(a){var c,d,e=a.id,f=a.parent&&a.parent.id,h=a.user,i=m.groups[e],j=f&&m.groups[f];if(a.name&&!i&&j){if(d=b(!0,{},a),d.id=null,d.children=[],d.parent={id:j},delete d.user,j===g){if(!h)return null;d={name:h.name,color:{r:0,g:0,b:0,a:0},parent:{id:g}}}c=["Add",{typeName:"Group",entity:d}]}return c},p=function(a,b){b.forEach(function(b,c){var d=a[c].parent.id,e=n(a[c].id);b&&(m.groups[a[c].id]=b),d===g&&e&&e.name===l.name&&l.privateUserGroups.push({id:b})})},q=h(d);return m.groups={},m.groups[f]=f,m.groups[g]=g,q.reduce(function(a,b,c){return a.then(function(){var a;return a=b.reduce(function(a,b){var c=o(b);return c&&a.push(c),a},[]),a.length?e(j,a,k):[]}).then(function(a){p(q[c],a)})},new Promise(function(a){return a([])}))},q=function(a,b,c){var d=function(a){c[a.id]&&(a.id=c[a.id]),delete a.children};Object.keys(a).forEach(function(c){var e=a[c];b.indexOf(c)>-1&&(Array.isArray(e)?e.forEach(function(a){d(a)}):e.id&&d(e))})},r=function(a,b){a.zoneTypes.forEach(function(a){a.id&&(a.id=b[a.id])})},s=function(a){return a&&a.length?d(j,"Get",{credentials:k,typeName:"SystemSettings"}).then(function(b){var c=b[0],e=a[0].data;return e&&(c.customWebMapProviderList=e),d(j,"Set",{credentials:k,typeName:"SystemSettings",entity:c})}):c()},t=function(a){var c=function(a){var b,c,e,f=[],g=[];do b=d(a,e),c=b.map(function(a){return a.id}),g.push(b),f=f.concat(c),e=c;while(e.length>0);return g},d=function(a,b){return a.reduce(function(a,c){return b?c.parent&&b.indexOf(c.parent.id)>-1&&a.push(c):(!c.parent||c.parent&&c.parent.id.indexOf("Group")>-1)&&a.push(c),a},[])},f=function(a,c){var d,e,f=a.id,g=a.parent&&a.parent.id,h=m[c][f],i=g&&(m[c][g]||g);return a.name&&!h&&i&&(e=b(!0,{},a),e.id=null,e.children=[],e.parent={id:i},d=["Add",{typeName:"Group",entity:e
}]),d},g=function(a,b,c){b.forEach(function(b,d){b&&(m[c][a[d].id]=b)})};return a.reduce(function(a,b){var d=b.type,h=b.data,i=c(h);return m[d]={},i.reduce(function(a,b,c){return a.then(function(){var a;return a=b.reduce(function(a,b){var c=f(b,d);return c&&a.push(c),a},[]),a.length?e(j,a,k):[]}).then(function(a){g(i[c],a,d)})},a)},new Promise(function(a){return a([])}))},u=function(a){var b=[],c=a.reduce(function(a,c){var d=c.type,e=c.data;return b=b.concat(e),e?a.concat(v(e,d)):a},[]);return e(j,c,k).then(function(a){y(c,b,a)})["catch"](function(a){console.error(a),console.log(c)})},v=function(a,c){return a&&a.reduce(function(a,d){var e,f="Add",g=b(!0,{},d);switch(c){case"users":e="User",delete g.availableDashboardReports,delete g.activeDashboardReports,g.name!==l.name?(g.password="1111111",g.changePassword="true"):(f="Set",g=b(!0,d,l),l=g),q(g,["companyGroups","driverGroups","privateUserGroups","reportGroups"],m.groups),q(g,["securityGroups"],m.securityGroups);break;case"devices":e="Device",q(g,["groups","autoGroups"],m.groups),g.workTime.id&&(g.workTime.id=m.WorkTime[g.workTime.id]);break;case"zones":e="Zone",r(g,m.ZoneType),q(g,["groups"],m.groups);break;case"zoneTypes":e="ZoneType";break;case"workTimes":e="WorkTime",!g.name&&(f="Set"),g.details&&g.details.forEach(function(a){a.id&&delete a.id});break;case"workHolidays":e="WorkHoliday";break;case"notificationTemplates":e="NotificationBinaryFile",delete g.id;break;case"distributionLists":e="DistributionList",g.recipients&&g.recipients.forEach(function(a){a.user&&a.user.id&&(a.user.id=m.User[a.user.id]),a.notificationBinaryFile&&a.notificationBinaryFile.id&&(a.notificationBinaryFile={id:m.NotificationBinaryFile[a.notificationBinaryFile.id]||a.notificationBinaryFile.id}),q(a,["group"],m.groups),a.id&&delete a.id}),g.rules&&g.rules.forEach(function(a){a.id&&m.rules[a.id]&&(a.id=m.rules[a.id])})}return"Add"===f&&delete g.id,a.push([f,{typeName:e,entity:g}]),a},[])},w=function(a){var b=a[0].data,c=b.reduce(function(a,b){return a.push(["Get",{typeName:"Diagnostic",search:{id:b.id}}]),a},[]);return e(j,c,k).then(function(a){y(c,b,a,null,function(a){return a&&a.length&&a[0].id})})["catch"](function(a){console.error(a),console.log(c)})},x=function(a){var c,f=a[0].data,g=function(){return d(j,"Get",{credentials:k,typeName:"Rule",search:{baseType:"Custom"}}).then(function(a){var b=a.reduce(function(a,b){return a.push(["Remove",{typeName:"Rule",entity:{id:b.id}}]),a},[]);return e(j,b,k)})},h=function(a){var b=function(a){switch(delete a.id,delete a.sequence,a.conditionType){case"RuleWorkHours":case"AfterRuleWorkHours":a.workTime&&a.workTime.id&&(a.workTime.id=m.WorkTime[a.workTime.id]);break;case"Driver":a.driver&&a.driver.id&&(a.driver.id=m.User[a.driver.id]);break;case"Device":a.device&&a.device.id&&(a.device.id=m.Device[a.device.id]);break;case"EnteringArea":case"ExitingArea":case"OutsideArea":case"InsideArea":a.zone?a.zone.id&&m.Zone[a.zone.id]&&(a.zone.id=m.Zone[a.zone.id]):a.zoneType.id&&m.ZoneType[a.zoneType.id]&&(a.zoneType.id=m.ZoneType[a.zoneType.id]);break;case"FilterStatusDataByDiagnostic":case"ActiveOrInactiveFault":case"Fault":if(a.diagnostic&&a.diagnostic.id&&!m.Diagnostic[a.diagnostic.id])return!1}return!0},c=function(a){var d;return b(a)?(d=a.children||[],d.every(function(a){return a.children?c(a):b(a)?!0:!1},!0)):!1};return a.reduce(function(a,b){return q(b,"groups",m.groups),c(b.condition)&&a.push(b),a},[])},i=function(a){var b=function(){if(!a.condition||!a.condition.conditionType||"DurationLongerThan"!==a.condition.conditionType){if(a&&a.condition&&"And"===a.condition.conditionType)for(var b in a.condition.children){var c=a.condition.children[b];if("DurationLongerThan"===c.conditionType)return parseFloat(c.value/60)}return 20}return parseFloat(a.condition.value/60)},c=function(){return a.condition&&a.condition.conditionType&&"IsValueLessThan"===a.condition.conditionType?parseFloat(a.condition.value):null},d=function(){return a.condition&&a.condition.conditionType&&"IsValueMoreThan"===a.condition.conditionType?parseFloat(a.condition.value):null},e=function(){return a.condition&&a.condition.children.length&&a.condition.children[0].conditionType&&"IsValueMoreThan"===a.condition.children[0].conditionType?parseFloat(a.condition.children[0].value):null},f=function(){if(!a.condition||"DistanceLongerThan"!==a.condition.conditionType||!a.condition.children)return null;var b=a.condition.children;if(!b[0]||"And"!==b[0].conditionType||!b[0].children)return null;for(var c=0;c<b[0].children.length;c++){var d=b[0].children[c];if(d.children&&d.children[0]&&"TripDistance"===d.children[0].conditionType)return parseFloat(d.value)}return null},g=function(){if(a&&a.condition&&a.condition.children&&a.condition.children[0]&&a.condition.children[0].children)for(var b=0;b<a.condition.children[0].children.length;b++){var c=a.condition.children[0].children[b];if("InsideArea"===c.conditionType&&"ZoneTypeOfficeId"===c.zoneType)return!0}return!1},h=a.id,i=[];switch(h){case"RuleHarshBrakingId":i=[c()];break;case"RuleJackrabbitStartsId":i=[d()];break;case"RuleHarshCorneringId":var j;a.condition&&a.condition.children&&a.condition.children[0]&&(j=a.condition.children[0].value),i=[j];break;case"RulePostedSpeedingId":i=[e()];break;case"RuleReverseAtStartId":i=[f()||20];break;case"RuleIdlingId":case"RuleAtOfficeLongerThanId":case"RuleLongLunchId":case"RuleLongStopsDuringWorkHoursId":i=[b()];break;case"RuleFleetIdlingId":i=[b(),g()]}return i},l=function(){return"rules"},n=function(a,b){return a.id||b};return f=h(f),c=f.reduce(function(a,c){var d;return"Stock"===c.baseType?a.push(["SetStockExceptionRule",{stockRuleDefinition:{id:c.id,param:i(c)}}]):(d=b(!0,{},c),delete d.id,delete d.version,a.push(["SetExceptionRuleWithConditions",{newRule:d,oldRule:null}])),a},[]),g().then(function(){return e(j,c,k)}).then(function(a){y(c,f,a,l,n)})["catch"](function(a){console.error(a),console.log(c)})},y=function(a,b,c,d,e){a.forEach(function(a,f){var g=b[f].id,h=e?e(c[f],g):c[f]||g,i=d?d(a):a[1].typeName;m[i]||(m[i]={}),m[i][g]=h})},z=function(a){var c=a[0].data,d=function(a){var c=a.reduce(function(a,c){var d=b(!0,{},c);return c.isSystem?(delete d.binaryData,a.push(["Set",{typeName:"ReportTemplate",entity:d}])):(delete d.id,delete d.reports,a.push(["Add",{typeName:"ReportTemplate",entity:d}])),a},[["GetReportSchedules",{includeTemplateDetails:!0,applyUserFilter:!1}]]);return e(j,c,k).then(function(b){return y(c.slice(1),a,b.slice(1),function(){return"templates"}),b})},f=function(a,c){return a.reduce(function(a,d,e){var f=d.reports,j=c[e]||d.id;return f.reduce(function(a,c){var d=b(!0,{},c);return d.template={id:j},d.lastModifiedUser={id:i.id},d.id=null,q(d,["groups","includeAllChildrenGroups","includeDirectChildrenOnlyGroups","scopeGroups"],m.groups),g(d),h(d),a.push(d),a},a)},[])},g=function(a){a.arguments&&a.arguments.devices&&a.arguments.devices.forEach(function(a){var b=a&&a.id;b&&m.devices[b]&&(a.id=m.devices[b])})},h=function(a){a.arguments&&a.arguments.rules&&a.arguments.rules.forEach(function(a){var b=a&&a.id;b&&m.rules[b]&&(a.id=m.rules[b])})},l=function(a,b){var c=[],d=function(a){var d,e=a.template.id,f=a.destination,g="Add";return b.some(function(a){var b=a.template.id,c=a.destination;return b===e&&c===f?(d=a,!0):void 0}),d&&(g="Set",a.id=d.id,c.push(d.id)),{method:g,report:a}},f=a.reduce(function(a,b){var c=d(b);return a.push([c.method,{typeName:"CustomReportSchedule",entity:c.report}]),a},[]);return b.reduce(function(a,b){return-1===c.indexOf(b.id)&&a.push(["Remove",{typeName:"CustomReportSchedule",entity:b}]),a},f),e(j,f,k)};return m.reports={},d(c).then(function(){var a=arguments[0][0],b=[].slice.call(arguments[0],1),d=f(c,b);return l(d,a)})},A=function(a){var a=a[0].data,b=a.mapProvider,c=function(a,b,c){Object.keys(c).forEach(function(a){var d=c[a],e=b.availableDashboardReports.indexOf(a),f=b.activeDashboardReports.indexOf(a);e>-1&&(b.availableDashboardReports[e]=d),f>-1&&(b.activeDashboardReports[f]=d)}),a.availableDashboardReports=b.availableDashboardReports,a.activeDashboardReports=b.activeDashboardReports};return l.defaultMapEngine=b.value,c(l,a.currentUser,m.templates),d(j,"Get",{credentials:k,typeName:"SystemSettings"}).then(function(c){var e=c[0];return"additional"===b.type&&(e.mapProvider=b.value),a.isUnsignedAddinsAllowed&&(e.allowUnsignedAddIn=a.isUnsignedAddinsAllowed),a.addins&&(e.customerPages=a.addins),d(j,"Set",{credentials:k,typeName:"SystemSettings",entity:e})})};return{"import":o}}}(window),document.addEventListener("DOMContentLoaded",function(){"use strict";Array.prototype.forEach.call(document.querySelectorAll("input[type=file]"),function(a){a.addEventListener("change",function(){var b=a.parentNode.parentNode.parentNode.querySelector("input[type=text]");b.value=a.value.split(/[\\\/]/g).pop()})})});